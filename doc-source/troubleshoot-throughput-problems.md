# Increasing throughput with Amazon SES<a name="troubleshoot-throughput-problems"></a>

When you send emails, you can call Amazon SES as frequently as your maximum send rate allows\. \(For more information about your maximum send rate, see [Managing Your Amazon SES sending quotas](manage-sending-quotas.md)\.\) However, each call to Amazon SES takes time to complete\.

If you are making multiple calls to Amazon SES using the Amazon SES API or the SMTP interface, you may want to consider the following tips to help you improve your throughput: 
+ **Measure your current performance to identify bottlenecks**—A possible performance test involves sending multiple test emails as quickly as possible within a code loop in your application\. Measure the round\-trip latency of each `SendEmail` request\. Then, incrementally launch additional instances of the application on the same machine, and watch for any impact on network latency\. You may also want to run this test on multiple machines and on different networks to help pinpoint any possible machine resource bottlenecks or network bottleneck that may exist\.
+ **\(API only\) Consider using persistent HTTP connections**—Rather than incurring the overhead of establishing a separate new HTTP connection for each API request, use persistent HTTP connections\. That is, reuse the same HTTP connection for multiple API requests\.
+ **Consider using multiple threads**—When an application uses a single thread, the application code calls the Amazon SES API and then synchronously waits for an API response\. Sending emails is typically an I/O\-bound operation, and doing the work from multiple threads provides better throughput\. You can send concurrently using as many threads of execution as you wish\.
+ **Consider using multiple processes**—Using multiple processes can help increase your throughput because you will have more concurrent active connections to Amazon SES\. For example, you can segment your intended emails into multiple buckets, and then run multiple instances of your email sending script simultaneously\.
+ **Consider using a local mail relay**—Your application can quickly transmit messages to your local mail server, which can then help to buffer the messages and asynchronously transmit them to Amazon SES\. Some mail servers support delivery concurrency, which means that even if your application is generating emails to the mail server in a single\-threaded fashion, the mail server will use multiple threads when sending to Amazon SES\. For more information, see [Integrating Amazon SES with your existing email server](send-email-smtp-existing-server.md)\.
+ **Consider hosting your application closer to the Amazon SES API endpoint**—You may wish to consider hosting your application in a data center close to the Amazon SES API endpoint, or on an Amazon EC2 instance in the same AWS Region as the Amazon SES API endpoint\. This can help to decrease network latency between your application and Amazon SES, and improve throughput\. For a list of regions where Amazon SES is available, see [Amazon Simple Email Service \(Amazon SES\)](https://docs.aws.amazon.com/general/latest/gr/rande.html#ses_region) in the *AWS General Reference*\.
+ **Consider using multiple machines**—Depending on the system configuration on your host machine, there may be a limit on the number of simultaneous HTTP connections to a single IP address, which may limit the benefits of parallelism once you exceed a certain number of concurrent connections on a single machine\. If this is a bottleneck, you may wish to consider making concurrent Amazon SES requests using multiple machines\.
+ **Consider using the Amazon SES query API instead of the SMTP endpoint**—Using the Amazon SES query API enables you to submit the email send request using a single network call, whereas interfacing with the SMTP endpoint involves an SMTP conversation which consists of multiple network requests \(for example, EHLO, MAIL FROM, RCPT TO, DATA, QUIT\)\. For more information about the Amazon SES query API, see [Using the Amazon SES API to send email](send-email-api.md)\.
+ **Use the Amazon SES mailbox simulator to test your maximum throughput**—To test any changes you may implement, you can use the mailbox simulator\. The mailbox simulator can help you to determine your system’s maximum throughput without using up your daily sending quota\. For information about the mailbox simulator, see [Testing email sending in Amazon SES](send-email-simulator.md)\.

If you are accessing Amazon SES through its SMTP interface, see [Amazon SES SMTP issues](troubleshoot-smtp.md) for specific SMTP\-related issues that may affect throughput\.